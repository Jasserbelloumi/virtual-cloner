name: Decompile APK
on:
  push:
    branches: [ main ]
jobs:
  decompile:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          java-version: '17'
          distribution: 'temurin'
      - name: Download JADX
        run: |
          wget https://github.com/skylot/jadx/releases/download/v1.4.7/jadx-1.4.7.zip
          unzip jadx-1.4.7.zip -d jadx
      - name: Decompile VCamera
        run: |
          ./jadx/bin/jadx VCamera.v.3.4.1.b.341.minSDK28.crk.Support.apk -d decompiled_source
      - name: Upload Decompiled Source
        uses: actions/upload-artifact@v4
        with:
          name: vcamera-source-code
          path: decompiled_source/
